window.addEventListener("load",e=>{const phpApp="https://projektowaniegraficzne.org/aukcje_logintegra/php/app.php",lang=document.querySelector("html").getAttribute("lang");"pl"!=navigator.language&&"pl-PL"!=navigator.language&&(document.querySelector(".lang_switcher").style.display="none"),"pl"!=navigator.language&&"pl-PL"!=navigator.language&&"pl"==lang&&(location.href="online-auctions.html");const mailForm=document.querySelector("form"),formFieldName=document.querySelector("[name=name]"),formFieldSurname=document.querySelector("[name=surname]"),formFieldCompany=document.querySelector("[name=company]"),formFieldPhone=document.querySelector("[name=phone]"),formFieldMail=document.querySelector("[name=email]"),sendSuccess=document.querySelector(".w-form-done"),sendFailed=document.querySelector(".w-form-fail"),sendFormButton=document.querySelector("[type=submit"),mailReg=/^[0-9a-z_.-]+@[0-9a-z.-]+\.[a-z]{2,4}$/i,checkField=(field,fieldText,fieldText_eng)=>{const fieldLang="pl"==lang?fieldText:fieldText_eng,comunicate="pl"==lang?"Wypełnij to pole":"Fill in this field";0==field.value.length?(errors=!0,field.previousElementSibling.innerHTML=`${fieldLang} <b style="color: black;">${comunicate}</b>`):(errors=!1,field.previousElementSibling.innerHTML=fieldLang)},checkEmailField=(field,pattern,fieldText)=>{const comunicate="pl"==lang?"Wypełnij to pole":"Fill in this field";pattern.test(field.value)?(errors=!1,field.previousElementSibling.innerHTML=fieldText):(errors=!0,field.previousElementSibling.innerHTML=`${fieldText} <b style="color: black;">${comunicate}</b>`)},SendForm=e=>{if(e.preventDefault(),""!=formFieldSurname.value)return!1;if(checkField(formFieldName,"Imię","Name"),checkField(formFieldCompany,"Firma","Company"),checkField(formFieldPhone,"Telefon","Phone"),checkEmailField(formFieldMail,mailReg,"Mail"),!errors){const formData=new FormData;formData.append("name",formFieldName.value),formData.append("company",formFieldCompany.value),formData.append("phone",formFieldPhone.value),formData.append("mail",formFieldMail.value),formData.append("lang",lang),fetch(phpApp,{mode:"no-cors",method:"post",body:formData}).then(response=>response.text()).then(response=>{"success"==response?(mailForm.reset(),sendSuccess.style.display="block",mailForm.style.display="none"):sendFailed.style.display="block"}).catch(error=>{sendFailed.style.display="block"})}};sendFormButton.addEventListener("click",SendForm)});